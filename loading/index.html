<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Loading datasets and variants - cgbeacon2 docs</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Loading datasets and variants";
    var mkdocs_page_input_path = "loading.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> cgbeacon2 docs</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../install/">Installation</a>
                    </li>
                </ul>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Loading datasets and variants</a>
    <ul class="current">
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../removing/">Removing datasets and variants</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../queries/">Queries</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">cgbeacon2 docs</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Loading datasets and variants</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="adding-data-to-the-database">Adding data to the database</h2>
<p>Dataset and variant data can be loaded into the database using specific the specific command line. To visualize command line options, from the terminal you can user the following command: <code>cgbeacon2 --help</code>.</p>
<p>The default procedure to add variants to the beacon is always the following:</p>
<ul>
<li>Create a dataset to link your variants to.</li>
<li>Load variants from a VCF file for one or more samples, specifying which dataset these variants belong to.</li>
</ul>
<h2 id="how-to-add">How to add:</h2>
<ol>
<li><a href="#demodata"> Demo data </a></li>
<li><a href="#dataset"> A new dataset (custom data)</a></li>
<li><a href="#variants"> Variants (custom data)</a></li>
</ol>
<p><a name="demodata"></a></p>
<h2 id="demo-data">Demo data</h2>
<p>Demo data consisting in a test dataset with public access and a set of variants (SNVs and structural variants of different type) is available under the cgbeacon2/resources/demo folder. You don't need to load this data manually since the following command will take care of everything:</p>
<pre><code>cgbeacon2 add demo
</code></pre>

<p><a name="dataset"></a></p>
<h2 id="adding-a-new-dataset">Adding a new dataset</h2>
<p>A new dataset can be created with the following command:</p>
<pre><code>cgbeacon2 add dataset -id &lt;dataset_id&gt; -name &lt;&quot;A dataset name&quot;&gt; -build &lt;GRCh37|GRCh38&gt; -authlevel &lt;public|registered|controlled&gt;
</code></pre>

<p>The above parameters (id, name, build, authlevel) are mandatory. If user doesn't specify any genome build then the default build used is GRCh37. One dataset can be associated to variants called using only one genome build.
<code>authlevel</code> parameter will be used in queries to return results according to the request authentication level.</p>
<ul>
<li><strong>Public datasets</strong> can be interrogated by any beacon and any user in general and should not be used to store sensitive data such as individual phenotypes.</li>
<li><strong>Bona fide researchers</strong> logged in via the Elixir AAI will be able to access data store in <strong>registered datasets</strong>.</li>
<li><strong>Controlled access datasets</strong> might be used to store sensitive information and will be accessed only by users that have a signed agreement and their access approved by a Data Access Committee (DAC).</li>
</ul>
<p>More info about the ELixir AAI authentication is available <a href="https://elixir-europe.org/services/compute/aai">here</a></p>
<p>Other optional parameters that can be provided to improve the dataset description are the following.</p>
<pre><code>  -desc TEXT                      dataset description
  -version FLOAT                  dataset version, i.e. 1.0
  -url TEXT                       external url
  -cc TEXT                        consent code key. i.e. HMB
  --update
</code></pre>

<p>The <code>--update</code> flag will allow to modify the information for a dataset that is already existing in the database.</p>
<p><a name="variants"></a></p>
<h2 id="adding-variant-data">Adding variant data</h2>
<p>Variant data can be loaded to the database using the following command:</p>
<pre><code>cgbeacon2 add variants

Options:
  -ds TEXT      dataset ID  [required]
  -vcf PATH     [required]
  -sample TEXT  one or more samples to save variants for  [required]
  -panel PATH   one or more bed files containing genomic intervals
</code></pre>

<p>ds (dataset id) and vcf (path to the VCF file containing the variants) are mandatory parameters. One or more samples included in the VCF file must also be specified. To specify multiple samples use the -sample parameter multiple times (example -sample sampleA -sample sampleB ..).</p>
<p>VCF files might as well be filtered by genomic intervals prior to variant uploading. To upload variants filtered by multiple panels use the options -panel panelA -panel panelB, providing the path to a <a href="http://genome.ucsc.edu/FAQ/FAQformat#format1">bed file</a> containing the genomic intervals of interest.</p>
<p>Additional variants for the same sample(s) and the same dataset might be added any time by running the same <code>cgbeacon2 add variants</code> specifying another VCF file. Whenever the variant is already found for the same sample and the same dataset it will not be saved twice.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../removing/" class="btn btn-neutral float-right" title="Removing datasets and variants">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../install/" class="btn btn-neutral" title="Installation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../install/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../removing/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
